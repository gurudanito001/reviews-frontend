(this["webpackJsonpreviews-front"]=this["webpackJsonpreviews-front"]||[]).push([[0],{11:function(e,t){e.exports={serverUrl:"https://immense-escarpment-51849.herokuapp.com/api"}},40:function(e,t,a){},41:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a(1),n=a.n(r),c=a(33),i=a.n(c),l=(a(40),a(7)),o=a(8),d=a(10),b=a(9),j=(a.p,a(41),a(16)),m=a(2),h=a(15),u=a(11),v=a(12),x=a.n(v),O=a(18),p=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).onSubmit=function(e){e.preventDefault(),console.log(s.state),x.a.post("".concat(u.serverUrl,"/user/login"),s.state).then((function(e){if(e.data.errors)s.props.setErrors(e.data.errors);else{var t=e.data.token;s.props.saveUserLocalStorage(t);var a=Object(O.a)(t);s.props.setCurrentUser(a),console.log(a),document.getElementById("closeLoginModal").click()}}))},s.onChange=function(e){s.setState(Object(h.a)({},e.target.id,e.target.value))},s.state={email:"",password:""},s}return Object(o.a)(a,[{key:"render",value:function(){return Object(s.jsx)("div",{className:"modal fade",id:"LoginModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(s.jsx)("div",{className:"modal-dialog  modal-dialog-centered modal-dialog-scrollable",children:Object(s.jsxs)("div",{className:"modal-content",children:[Object(s.jsxs)("div",{className:"modal-header",children:[Object(s.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Login"}),Object(s.jsx)("button",{id:"closeLoginModal",type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(s.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(s.jsx)("div",{className:"modal-body",children:Object(s.jsxs)("form",{children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(s.jsx)("input",{type:"email",className:"form-control",id:"email",onChange:this.onChange})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"password",children:"Password"}),Object(s.jsx)("input",{type:"password",className:"form-control",id:"password",onChange:this.onChange})]})]})}),Object(s.jsx)("div",{className:"modal-footer",children:Object(s.jsx)("button",{type:"submit",className:"btn btn-success",onClick:this.onSubmit,children:"Submit"})})]})})})}}]),a}(n.a.Component),g=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).onSubmit=function(e){e.preventDefault(),x.a.post("".concat(u.serverUrl,"/user/register"),s.state).then((function(e){e.data.errors?s.props.setErrors(e.data.errors):document.getElementById("closeRegisterModal").click()}))},s.onChange=function(e){s.setState(Object(h.a)({},e.target.id,e.target.value))},s.state={firstname:"",lastname:"",email:"",password:"",password2:"",admin:!1},s}return Object(o.a)(a,[{key:"render",value:function(){return Object(s.jsx)("div",{className:"modal fade",id:"RegisterModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(s.jsx)("div",{className:"modal-dialog  modal-dialog-centered modal-dialog-scrollable",children:Object(s.jsxs)("div",{className:"modal-content",children:[Object(s.jsxs)("div",{className:"modal-header",children:[Object(s.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Register"}),Object(s.jsx)("button",{id:"closeRegisterModal",type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(s.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(s.jsx)("div",{className:"modal-body",children:Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"firstname",children:"Firstname"}),Object(s.jsx)("input",{type:"text",className:"form-control form-control-sm",id:"firstname",onChange:this.onChange})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"lastname",children:"Lastname"}),Object(s.jsx)("input",{type:"text",className:"form-control form-control-sm",id:"lastname",onChange:this.onChange})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(s.jsx)("input",{type:"email",className:"form-control form-control-sm",id:"email",onChange:this.onChange})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"password",children:"Password"}),Object(s.jsx)("input",{type:"password",className:"form-control form-control-sm",id:"password",onChange:this.onChange})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"password2",children:"Confirm Password"}),Object(s.jsx)("input",{type:"password",className:"form-control form-control-sm",id:"password2",onChange:this.onChange})]})]})}),Object(s.jsx)("div",{className:"modal-footer",children:Object(s.jsx)("button",{type:"submit",className:"btn btn-success",onClick:this.onSubmit,children:"Submit"})})]})})})}}]),a}(n.a.Component),f=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).onChange=function(e){s.setState(Object(h.a)({},e.target.id,e.target.value))},s.onSubmit=function(e){if(e.preventDefault(),s.state.reviewText){var t={reviewText:s.state.reviewText,author:s.props.currentUser.firstname+" "+s.props.currentUser.lastname,validated:s.props.currentUser.admin};console.log(t),s.setState({sending:!0}),x.a.post("".concat(u.serverUrl,"/review/add"),t).then((function(e){s.setState({sending:!1}),document.getElementById("closeReviewModal").click()}))}},s.state={sending:!1,reviewText:""},s}return Object(o.a)(a,[{key:"render",value:function(){return Object(s.jsx)("div",{className:"modal fade",id:"createReviewModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(s.jsx)("div",{className:"modal-dialog  modal-dialog-centered modal-dialog-scrollable",children:Object(s.jsxs)("div",{className:"modal-content",children:[Object(s.jsxs)("div",{className:"modal-header",children:[Object(s.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Create Review"}),Object(s.jsx)("button",{id:"closeReviewModal",type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(s.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(s.jsx)("div",{className:"modal-body",children:this.props.currentUser.firstname?Object(s.jsxs)("form",{children:[Object(s.jsxs)("div",{className:"form-group row",children:[Object(s.jsx)("label",{htmlFor:"author",className:"col-sm-2 col-form-label",children:"Author"}),Object(s.jsx)("div",{className:"col-sm-10",children:Object(s.jsx)("input",{type:"text",className:"form-control-plaintext",id:"author",defaultValue:this.props.currentUser.firstname+" "+this.props.currentUser.lastname})})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"reviewText",children:"Review Text"}),Object(s.jsx)("textarea",{className:"form-control",id:"reviewText",maxLength:"150",rows:"3",onChange:this.onChange})]})]}):Object(s.jsx)("h6",{className:"text-danger",children:" Please Login to create a review "})}),Object(s.jsx)("div",{className:"modal-footer",children:Object(s.jsx)("button",{type:"submit",className:"btn btn-success",disabled:this.state.sending,onClick:this.onSubmit,children:"Submit"})})]})})})}}]),a}(n.a.Component),w=function(e){return Object(s.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light mb-4 sticky-top",children:[Object(s.jsx)(j.b,{to:"/reviews-frontend/",className:"navbar-brand font-weight-bold",href:"#",children:"Reviews Application"}),Object(s.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(s.jsx)("span",{className:"navbar-toggler-icon"})}),Object(s.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:[Object(s.jsxs)("ul",{className:"navbar-nav",children:[Object(s.jsx)("li",{className:"nav-item active",children:Object(s.jsx)(j.b,{to:"/reviews-frontend/reviews",className:"nav-link",children:"Reviews"})}),Object(s.jsx)("li",{className:"nav-item",children:Object(s.jsx)(j.b,{to:"/reviews-frontend/pendingValidation",className:"nav-link",href:"#",children:"Pending Validation"})})]}),Object(s.jsx)("button",{className:"btn btn-sm btn-secondary mr-1 ml-auto","data-toggle":"modal","data-target":"#createReviewModal",children:"Create Review"}),Object(s.jsx)("button",{className:"btn btn-sm btn-info mr-1","data-toggle":"modal","data-target":"#RegisterModal",children:"Register"}),e.currentUser.firstname?Object(s.jsx)("button",{className:"btn btn-sm btn-danger",onClick:e.logUserOut,children:"Logout"}):Object(s.jsx)("button",{className:"btn btn-sm btn-success","data-toggle":"modal","data-target":"#LoginModal",children:"Login"})]})]})},N=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){x.a.get("".concat(u.serverUrl,"/review/getValidated")).then((function(e){e.data&&n.setState({reviews:e.data})}))},n.reviews=function(){return n.state.reviews.map((function(e){return Object(s.jsx)(r.Fragment,{children:Object(s.jsx)("div",{className:"card mb-3",style:{minWidth:"18rem",maxWidth:"18rem"},children:Object(s.jsxs)("div",{className:"card-body",children:[Object(s.jsx)("span",{className:"mr-2",children:"Author:"}),Object(s.jsx)("span",{className:"card-subtitle mb-2 text-muted",children:e.author}),Object(s.jsx)("label",{className:"d-block mt-3 mb-1",children:"Review"})," ",Object(s.jsx)("hr",{className:"mt-0"}),Object(s.jsx)("p",{className:"card-text",children:e.reviewText})]})})},e._id)}))},n.state={reviews:[]},n}return Object(o.a)(a,[{key:"render",value:function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h4",{className:"mb-3",children:"Reviews"}),Object(s.jsx)("div",{className:"card-deck",children:this.reviews()})]})}}]),a}(n.a.Component),y=function(){return Object(s.jsxs)("div",{children:[Object(s.jsx)("header",{children:Object(s.jsx)("h4",{children:"Welcome to my review web application"})}),Object(s.jsxs)("div",{className:"jumbotron",children:[Object(s.jsx)("p",{children:"This web application was built as an interview test for Bimbi Philips Limited"}),Object(s.jsx)("p",{children:"This was done in a hurry. So please be gentle with your scrutiny \ud83d\ude4f"}),Object(s.jsx)("p",{children:"Thank you for your consideration"}),Object(s.jsx)("br",{}),Object(s.jsxs)("div",{children:[Object(s.jsx)("header",{children:Object(s.jsx)("h4",{children:"Instructions"})}),Object(s.jsxs)("p",{className:"bg-white d-inline-block p-2",children:["To have full privileges, Login as an admin",Object(s.jsx)("br",{}),"email: admin@gmail.com",Object(s.jsx)("br",{}),"password: administrator"]}),Object(s.jsx)("header",{children:Object(s.jsx)("h4",{children:"Features"})}),Object(s.jsxs)("p",{children:[Object(s.jsx)("strong",{children:"Admin has the following privileges"})," ",Object(s.jsx)("br",{}),"Create Review (Admin Reviews will not need validation)",Object(s.jsx)("br",{}),"View Reviews ",Object(s.jsx)("br",{}),"Discard / Validate Reviews ",Object(s.jsx)("br",{}),"Login / Register ",Object(s.jsx)("br",{})]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("strong",{children:"Users will have the following privileges"})," ",Object(s.jsx)("br",{}),"Create Review (User Reviews will be subject to validation by admin)",Object(s.jsx)("br",{}),"View Reviews ",Object(s.jsx)("br",{}),"Login / Register"]})]})]})]})},C=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.fetchUnvalidatedReviews()},n.fetchUnvalidatedReviews=function(){x.a.get("".concat(u.serverUrl,"/review/getUnvalidated")).then((function(e){e.data&&n.setState({reviews:e.data})}))},n.discardReview=function(e){x.a.delete("".concat(u.serverUrl,"/review/delete/").concat(e)).then((function(e){e.data&&n.fetchUnvalidatedReviews()}))},n.validateReview=function(e){x.a.post("".concat(u.serverUrl,"/review/validate/").concat(e)).then((function(e){e.data&&n.fetchUnvalidatedReviews()}))},n.reviews=function(){return n.state.reviews.map((function(e){return Object(s.jsx)(r.Fragment,{children:Object(s.jsx)("div",{className:"card",style:{minWidth:"18rem",maxWidth:"18rem"},children:Object(s.jsxs)("div",{className:"card-body",children:[Object(s.jsx)("span",{className:"mr-2",children:"Author:"}),Object(s.jsx)("span",{className:"card-subtitle mb-2 text-muted",children:e.author}),Object(s.jsx)("label",{className:"d-block mt-3 mb-1",children:"Review"})," ",Object(s.jsx)("hr",{className:"mt-0"}),Object(s.jsx)("p",{className:"card-text",children:e.reviewText}),Object(s.jsx)("button",{className:"card-link btn btn-sm btn-danger",onClick:function(){n.discardReview(e._id)},children:"Discard"}),Object(s.jsx)("button",{className:"card-link btn btn-sm btn-success",onClick:function(){n.validateReview(e._id)},children:"Validate"})]})})},e._id)}))},n.state={reviews:[]},n}return Object(o.a)(a,[{key:"render",value:function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h4",{className:"mb-3",children:"Pending Validation"}),Object(s.jsx)("div",{className:"card-deck",children:this.props.currentUser.admin?this.reviews():Object(s.jsx)("h6",{className:"text-danger",children:" Sorry!! Only an Admin can access this page"})})]})}}]),a}(n.a.Component),U=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).componentDidMount=function(){r.setCurrentUserFromLocalStorage()},r.setCurrentUser=function(e){r.setState({currentUser:e})},r.setCurrentUserFromLocalStorage=function(){var e=localStorage.getItem("jwtToken");if(e){var t=Object(O.a)(e);r.setState({currentUser:t}),console.log(e)}},r.saveUserLocalStorage=function(e){localStorage.setItem("jwtToken",e)},r.logUserOut=function(){r.setState({currentUser:{}},console.log(r.state)),localStorage.clear()},r.setErrors=function(e){r.setState({errors:e})},r.displayErrors=function(){return Object.values(r.state.errors).map((function(e){return Object(s.jsxs)("div",{className:"alert alert-warning alert-dismissible fade show",role:"alert",style:{maxWidth:"300px"},children:[Object(s.jsxs)("strong",{children:[e,"!"]}),Object(s.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",children:Object(s.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})}))},r.state={errors:{},currentUser:{}},r}return Object(o.a)(a,[{key:"render",value:function(){return Object(s.jsxs)(j.a,{children:[Object(s.jsx)(w,{logUserOut:this.logUserOut,currentUser:this.state.currentUser}),Object(s.jsxs)("div",{className:"container",children:[this.displayErrors(),Object(s.jsxs)(m.c,{children:[Object(s.jsx)(m.a,{path:"/reviews-frontend/",exact:!0,component:y}),Object(s.jsx)(m.a,{path:"/reviews-frontend/reviews",exact:!0,component:N}),Object(s.jsx)(m.a,{path:"/reviews-frontend/pendingValidation",children:Object(s.jsx)(C,{currentUser:this.state.currentUser})})]})]}),Object(s.jsx)(p,{saveUserLocalStorage:this.saveUserLocalStorage,setCurrentUser:this.setCurrentUser,setErrors:this.setErrors}),Object(s.jsx)(g,{setErrors:this.setErrors}),Object(s.jsx)(f,{currentUser:this.state.currentUser})]})}}]),a}(n.a.Component),R=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,68)).then((function(t){var a=t.getCLS,s=t.getFID,r=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),s(e),r(e),n(e),c(e)}))};a(63),a(64);i.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(U,{})}),document.getElementById("root")),R()}},[[67,1,2]]]);
//# sourceMappingURL=main.c9a72f32.chunk.js.map